<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ricky Trades</title>
  <style>
    :root{--green:#0a7f4a}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:#fafafa;color:#111}
    header{position:sticky;top:0;background:#fff8;border-bottom:1px solid #eaeaea;backdrop-filter:saturate(180%) blur(8px)}
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    .hrow{display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .brand{font-weight:800;font-size:20px}
    .btn{display:inline-block;padding:10px 12px;background:var(--green);color:#fff;text-decoration:none;border-radius:10px;font-weight:600}
    .badge{display:inline-block;background:#eef7f3;color:var(--green);border-radius:10px;padding:2px 8px;margin-left:8px;font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-top:18px}
    .card{background:#fff;border:1px solid #eee;border-radius:14px;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.03);transition:transform .12s ease, box-shadow .12s ease}
    .card:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .img{aspect-ratio:1/1;background:#f2f2f2}
    .img img{width:100%;height:100%;object-fit:cover;display:block}
    .pad{padding:12px}
    .title{font-weight:600;line-height:1.25;margin:0 0 8px;font-size:15px}
    .price{color:var(--green);font-weight:700}
    footer{color:#666;font-size:14px;margin:28px 0}
    .toprow{display:flex;align-items:center;justify-content:space-between;gap:12px}
  </style>
</head>
<body>
<header>
  <div class="hrow wrap">
    <div class="brand">Ricky <span style="color:var(--green)">Trades</span></div>
    <a class="btn" href="https://www.ebay.com/usr/rickytradesllc" target="_blank" rel="noopener">Shop on eBay</a>
  </div>
</header>

<div class="wrap">
  <div class="toprow">
    <h1>New arrivals <span class="badge">Live from eBay</span></h1>
    <a class="btn" href="https://www.ebay.com/usr/rickytradesllc" target="_blank" rel="noopener">View all on eBay</a>
  </div>

  <div id="grid" class="grid"></div>
  <div id="msg" style="margin:12px 0;color:#777"></div>

  <footer>Free U.S. shipping on most items • 1–3 day handling • 30-day returns</footer>
</div>

<script>
const SELLER = "rickytradesllc";
const FEEDS = [
  `https://www.ebay.com/sch/i.html?_ssn=${encodeURIComponent(SELLER)}&_sop=10&_rss=1`,
  `https://www.ebay.com/sch/i.html?_fss=1&_saslop=1&_sasl=${encodeURIComponent(SELLER)}&_sop=10&_rss=1`,
];

async function load(){
  const grid=document.getElementById('grid');
  const msg=document.getElementById('msg');
  msg.textContent='Loading live listings…';

  // try both feeds through rss2json (client-side)
  let items=[];
  for (const rss of FEEDS) {
    try {
      const url='https://api.rss2json.com/v1/api.json?rss_url='+encodeURIComponent(rss)+'&count=50&_=' + Date.now();
      const r = await fetch(url);
      const data = await r.json();
      if (data && Array.isArray(data.items) && data.items.length) {
        items = data.items.map(it => ({
          title: it.title,
          url: it.link,
          image: it.thumbnail || (it.enclosure && it.enclosure.link) || '',
          price: extractPrice(it.title) || extractPrice(it.description) || 0
        }));
        break;
      }
    } catch(_) {}
  }

  grid.innerHTML='';
  if (!items.length) {
    msg.textContent='No live items found yet. Check back soon.';
    return;
  }
  msg.textContent='';

  items.forEach(it=>{
    const card=document.createElement('a');
    card.className='card';
    card.href=it.url;
    card.target='_blank';
    card.rel='noopener';
    card.innerHTML=`
      <div class="img">${it.image ? `<img src="${it.image}" alt="">` : ''}</div>
      <div class="pad">
        <div class="title">${it.title}</div>
        ${it.price ? `<div class="price">$${Number(it.price).toFixed(2)}</div>` : ``}
      </div>`;
    grid.appendChild(card);
  });
}

function extractPrice(text){
  if (!text) return 0;
  const m = text.replace(/,/g,'').match(/\$\s?([0-9]+(?:\.[0-9]{2})?)/);
  return m ? parseFloat(m[1]) : 0;
}

load();
</script>
</body>
</html>
