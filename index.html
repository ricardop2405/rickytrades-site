<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ricky Trades</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:#fafafa;color:#111}
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    header{position:sticky;top:0;background:#fff8;border-bottom:1px solid #eaeaea;backdrop-filter:saturate(180%) blur(8px)}
    .hrow{display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .brand{font-weight:800;font-size:20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-top:18px}
    .card{background:#fff;border:1px solid #eee;border-radius:14px;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.03)}
    .img{aspect-ratio:4/3;background:#f2f2f2}
    .img img{width:100%;height:100%;object-fit:cover;display:block}
    .pad{padding:12px}
    .title{font-weight:600;line-height:1.2;margin:0 0 6px}
    .price{color:#0a7f4a;font-weight:700}
    .btn{display:inline-block;padding:10px 12px;background:#0a7f4a;color:#fff;text-decoration:none;border-radius:10px;font-weight:600}
    .badge{display:inline-block;background:#eef7f3;color:#0a7f4a;border-radius:10px;padding:2px 8px;margin-left:8px;font-size:12px}
    footer{color:#666;font-size:14px;margin:28px 0}
  </style>
</head>
<body>
<header>
  <div class="hrow wrap">
    <div class="brand">Ricky <span style="color:#0a7f4a">Trades</span></div>
    <a class="btn" href="https://www.ebay.com/usr/rickytradesllc" target="_blank">Shop on eBay</a>
  </div>
</header>

<div class="wrap">
  <h1>New arrivals <span class="badge">Live from eBay</span></h1>
  <div id="grid" class="grid"></div>
  <div id="msg" style="margin:12px 0;color:#777"></div>

  <footer>
    Free U.S. shipping on most items • 1–3 day handling • 30-day returns
  </footer>
</div>

<script>
async function load(){
  const grid=document.getElementById('grid');
  const msg=document.getElementById('msg');
  msg.textContent='Loading live listings…';
  try{
    const r=await fetch('/api/ebay?ts=' + Date.now()); // cache-busting query
    const d=await r.json();
    const items=(d&&d.items)||[];
    grid.innerHTML='';
    if(!items.length){ msg.textContent='No live items found yet. Check back soon.'; return; }
    msg.textContent='';
    items.forEach(it=>{
      const card=document.createElement('div');
      card.className='card';
      card.innerHTML=`
        <div class="img">${it.image?`<img src="${it.image}" alt="">`:''}</div>
        <div class="pad">
          <div class="title">${it.title}</div>
          <div class="price">$${(it.price||0).toFixed(2)}</div>
          <div style="margin-top:10px">
            <a class="btn" href="${it.url}" target="_blank">View on eBay</a>
          </div>
        </div>`;
      grid.appendChild(card);
    });
  }catch(e){
    msg.textContent='Could not load items (try again in a minute).';
  }
}
load();
</script>
</body>
</html>
